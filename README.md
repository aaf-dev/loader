# Loader

Приложение, разработанное по тестовому заданию для Нетологии.

Архитектура: MVVM + Clean architecture, многомодульная.<br>
Стек: Coroutines, SharedFlow, Retrofit, Koin.

Основной модуль приложения - app - имеет в зависимостях остальные модули приложения для инициализации.

Core модули:
- core-network
  - модуль для работы с сетевыми запросами;
  - хранит абстракцию retrofit сервиса (NetworkService);
  - хранит модели сущностей ответов от удалённого репозитория;

- core-data
  - модуль для обработки данных, поступающих от первичных источников (сеть, БД и т.д.);
  - хранит публичную абстракцию репозитория данных, а также реализацию репозитория (видимость на уровне модуля);
  - хранит модели domain уровня;
  - хранит конвертеры моделей сетевого уровня в модели domain уровня;

- core-ui
  - хранит модели UI уровня;
  - хранит конвертеры моделей domain уровня в модели UI уровня;
  - хранит модель состояний UI (UiState - Loading, Error, Success).

Feature модули:
- feature-main
  - отвечает за логику главного экрана;
  - хранит локальный конвертер списка domain моделей в список UI моделей.

В модуле feature-main описаны классы MainFragment и MainViewModel:
- MainFragment отвечает за отображение данных на экране;
- MainViewModel обращается к репозиторию за данными, которые необходимо отобразить.

Также, в MainViewModel создаётся приватный экземпляр MutableSharedFlow с типом UiState<List<NetologyDataUiModel>> (с именем _state) и публичный экземпляр SharedFlow с таким же типом (с именем state).<br>
При инициализации MainViewModel вызывается метод getData(), который обращается к репозиторию, чтобы получить данные из сетевого источника.<br>
В момент вызова getData() мы передаём в _state состояние UiState.Loading.
При успешном выполнении запроса в _state передаётся результат запроса.
При ошибке - в _state попадает сама ошибка.

В момент, когда MainFragment произициализирован, view отрисована, мы подписываемся на изменения в viewModel.state и при изменении состояний вызывается один из методов - onLoading, onSuccess, onError.
